(function(t){function e(e){for(var a,i,n=e[0],l=e[1],u=e[2],m=0,p=[];m<n.length;m++)i=n[m],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],a=!0,n=1;n<s.length;n++){var l=s[n];0!==r[l]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=s[0]))}return t}var a={},r={app:0},o=[];function i(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=a,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(s,a,function(e){return t[e]}.bind(null,a));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var u=0;u<n.length;u++)e(n[u]);var d=l;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0a00":function(t,e,s){"use strict";s("de0a")},"125f":function(t,e,s){},"2e16":function(t,e,s){"use strict";s("eff1")},"379f":function(t,e,s){"use strict";s("51c2")},4580:function(t,e,s){"use strict";s("5d57")},"50c6":function(t,e,s){},"51c2":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);var a=s("2b0e"),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("div",{attrs:{id:"nav"}},[e("div",{attrs:{id:"upper-nav"}},[e("i",[e("router-link",{staticClass:"link-text",attrs:{to:{name:"home"}}},[e("img",{staticClass:"home-image",attrs:{src:"https://res.cloudinary.com/dzt9ane7n/image/upload/v1675996605/Momento_cbwk2o.jpg",alt:"Hand-drawn camera polaroid"}})])],1),e("i",[t._v(" ")]),e("i",{staticClass:"nav-items fa-solid fa-house"},[e("router-link",{staticClass:"link-text",attrs:{to:{name:"home"}}},[t._v(" Home ")])],1),""==t.$store.state.token?e("i",{staticClass:"nav-items fa-solid fa-arrow-right-to-bracket"},[t._v("  "),e("router-link",{staticClass:"link-text",attrs:{to:{name:"login"}}},[t._v("Login")])],1):t._e(),""!=t.$store.state.token?e("i",{staticClass:"nav-items fa-solid fa-heart"},[t._v("  "),e("router-link",{staticClass:"link-text",attrs:{to:{name:"favorites"}}},[t._v("Favorites")])],1):t._e(),""!=t.$store.state.token?e("i",{staticClass:"nav-items fa-solid fa-user"},[t._v("  "),e("router-link",{staticClass:"link-text",attrs:{to:{name:"profile",params:{username:this.$store.state.user.username}}}},[t._v("Profile")])],1):t._e(),""!=t.$store.state.token?e("i",{staticClass:"nav-items fa-solid fa-arrow-right-to-bracket"},[t._v("  "),e("router-link",{staticClass:"link-text",attrs:{to:{name:"logout"}}},[t._v("Logout")])],1):t._e(),""!=t.$store.state.token?e("i",{staticClass:"nav-items fa-regular fa-square-plus",attrs:{"data-toggle":"modal","data-target":"#createModal"}},[t._v("  "),e("span",{attrs:{id:"create-modal-link"}},[t._v("Create")])]):t._e(),e("div",{staticClass:"modal fade",attrs:{id:"createModal",tabindex:"-1"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered"},[e("div",{staticClass:"modal-content"},[t._m(0),e("div",{staticClass:"modal-body"},[e("create-post")],1),e("div",{staticClass:"modal-footer"})])])])]),t._m(1)]),e("div",{attrs:{id:"page d-flex flex-column"}},[e("div",{staticClass:"title"},[e("h1",{staticClass:"momento-title"},[t._v("Momento")]),e("div",{staticClass:"search-bar"},[e("svg",{staticClass:"search-icon",attrs:{"aria-hidden":"true",viewBox:"0 0 24 24"}},[e("g",[e("path",{attrs:{d:"M21.53 20.47l-3.66-3.66C19.195 15.24 20 13.214 20 11c0-4.97-4.03-9-9-9s-9 4.03-9 9 4.03 9 9 9c2.215 0 4.24-.804 5.808-2.13l3.66 3.66c.147.146.34.22.53.22s.385-.073.53-.22c.295-.293.295-.767.002-1.06zM3.5 11c0-4.135 3.365-7.5 7.5-7.5s7.5 3.365 7.5 7.5-3.365 7.5-7.5 7.5-7.5-3.365-7.5-7.5z"}})])]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.username,expression:"filter.username"}],attrs:{type:"search",id:"username-search",placeholder:"Search"},domProps:{value:t.filter.username},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getSearchResult()},input:function(e){e.target.composing||t.$set(t.filter,"username",e.target.value)}}})])]),e("router-view",{attrs:{id:"pages-view"}})],1)])},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(" Create a Post ")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"footer"}},[e("div",{staticClass:"contact"},[e("p",{staticClass:"contact-us"},[t._v("CONTACT US")]),e("div",{staticClass:"contact-items"},[e("a",{attrs:{href:"http://linkedin.com/in/chelsea-mauldin",target:"blank"}},[e("i",{staticClass:"fa-brands fa-linkedin"})]),e("a",{attrs:{href:"https://www.linkedin.com/in/edward-momanyi/",target:"blank"}},[e("i",{staticClass:"fa-brands fa-linkedin"})]),e("a",{attrs:{href:"https://www.linkedin.com/in/heewwoo/",target:"blank"}},[e("i",{staticClass:"fa-brands fa-linkedin"})]),e("a",{attrs:{href:"https://www.linkedin.com/in/vanessa-j-reed/",target:"blank"}},[e("i",{staticClass:"fa-brands fa-linkedin"})])])]),e("div",{attrs:{id:"cpr"}},[e("i",{staticClass:"fa-regular fa-copyright"}),t._v("  "),e("span",{staticClass:"copyright"},[t._v("2023 Momento")])])])}],i=(s("14d9"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"create-main-view"},[e("create-post")],1)}),n=[],l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"create-main"},[e("Cloudinary-Comp",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},u=[],d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"upload-main d-flex flex-column"},[t.urlPosted?t._e():e("button",{staticClass:"upload-picture-button",on:{click:t.upload}},[t._v(" Upload a Picture")]),e("br"),t.urlPosted?e("p",[t._v("Upload Complete!")]):t._e(),"edit-profile"!=this.$route.name?e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.post.caption,expression:"post.caption"}],staticClass:"mt-3",attrs:{placeholder:"Add a caption...",id:"caption-input",rows:"3"},domProps:{value:t.post.caption},on:{input:function(e){e.target.composing||t.$set(t.post,"caption",e.target.value)}}}):t._e(),e("br"),"edit-profile"!=this.$route.name?e("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"save-changes-button","data-dismiss":"modal"},on:{click:t.addPost}},[t._v(" Save changes ")]):t._e()])},m=[],p=s("bc3a"),c=s.n(p),h={displayPosts(){return c.a.get("/posts")},displayPost(t){return c.a.get("/posts/"+t)},displayCommentsByPost(t){return c.a.get(`/post/${t}/comments`)},displayAllComments(){return c.a.get("/comments")},createNewComment(t){return c.a.post("/post/create-comment",t)},like(t){return c.a.put(`/post/${t}/like`)},unlike(t){return c.a.put(`/post/${t}/unlike`)},displayProfile(t){return c.a.get("/profiles/"+t)},displayPostsByUsername(t){return c.a.get(`profiles/${t}/posts`)},displayFavoritePosts(t){return c.a.get("/favorites/"+t)},displayFavoritePhotos(t){return c.a.get(`/favorites/${t}/photos`)},displayFavoriteIds(t){return c.a.get(`/favorites/${t}/ids`)},addFavoritePost(t){return c.a.post("/favorites/add",t)},deleteFavorite(t){return c.a.delete("/favorites/"+t)},createPost(t){return c.a.post("/posts/create",t)},updateProfile(t){return c.a.put("/profiles/update",t)},getAllRatings(){return c.a.get("/ratings")},getRatingsById(t){return c.a.get("/ratings/"+t)},addRating(t){return c.a.post("/ratings",t)},updateRating(t){return c.a.put("/ratings",t)},getRatingByUser(t,e){return c.a.get(`/ratings/${t}/${e}`)},getAvgRating(t){return c.a.get(`/ratings/${t}/avg`)},displayPostsByRating(t){return c.a.get("/posts/rating/"+t)},editCaption(t){return c.a.put("/post/caption",t)},removePost(t){return c.a.delete("/post/"+t)},displayPostsByTime(t){return c.a.get("/posts/time/"+t)},displayPhotosByUser(t){return c.a.get(`/profiles/${t}/photos`)}},f={name:"CloudinaryComp",data(){return{myWidget:{},post:{photo_url:"",username:"",likes:0,caption:""},urlPosted:!1}},methods:{upload(){this.myWidget.open()},addPost(){""!==this.post.photo_url&&(this.post.username=this.$store.state.user.username,h.createPost(this.post).then(t=>{200==t.status&&(this.$store.commit("ADD_PHOTO",this.post.photo_url),this.post.caption="",this.post.photo_url="",this.$router.push("/profile/"+this.post.username),this.urlPosted=!1)}))}},mounted(){this.myWidget=window.cloudinary.createUploadWidget({cloudName:"depdfgnxo",uploadPreset:"c0pfjpmh"},(t,e)=>{!t&&e&&"success"===e.event&&("edit-profile"!=this.$route.name?this.post.photo_url=e.info.url:this.$store.commit("SET_PROFILE_IMAGE_URL",e.info.url),this.urlPosted=!0)})}},v=f,g=(s("f959"),s("2877")),_=Object(g["a"])(v,d,m,!1,null,null,null),C=_.exports,P={components:{CloudinaryComp:C}},w=P,y=Object(g["a"])(w,l,u,!1,null,null,null),b=y.exports,$={components:{createPost:b}},k=$,O=Object(g["a"])(k,i,n,!1,null,null,null),E=O.exports,S={data(){return{profile:{},filter:{username:""}}},methods:{getSearchResult(){h.displayProfile(this.filter.username).then(t=>{200==t.status&&this.$store.commit("SET_PROFILE",t.data)}),h.displayPostsByUsername(this.filter.username).then(t=>{this.$store.commit("SET_ALL_POSTS",t.data)}),this.$router.push("/profile/"+this.filter.username),h.displayPostsByUsername(this.$route.params.username).then(t=>{this.$store.commit("SET_ALL_POSTS",t.data)}),h.displayPhotosByUser(this.$route.params.username).then(t=>{200==t.status&&this.$store.commit("SET_USER_PHOTOS",t.data)})}},components:{createPost:E},mounted(){h.displayFavoritePosts(this.$store.state.user.username).then(t=>{this.$store.commit("SET_FAVORITES",t.data)}),h.displayFavoriteIds(this.$store.state.user.username).then(t=>{this.$store.commit("SET_FAV_IDS",t.data)}),h.displayAllComments().then(t=>{this.$store.commit("SET_COMMENTS",t.data)})}},T=S,x=(s("2e16"),Object(g["a"])(T,r,o,!1,null,null,null)),A=x.exports,R=s("8c4f"),I=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home d-flex"},[e("div",{staticClass:"posts-container"},[e("div",{staticClass:"post-container"},t._l(this.$store.state.allPosts,(function(t){return e("post",{key:t.post_id,staticClass:"each-post",attrs:{post:t}})})),1)]),e("div",{staticClass:"sort-container d-flex flex-column"},[e("div",{staticClass:"sort-div"},[t._m(0),e("div",{staticClass:"dropdown-menu"},[e("a",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(e){return t.orderByRating("desc")}}},[t._v("Highest Rating")]),e("a",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(e){return t.orderByRating("asc")}}},[t._v("Lowest Rating")]),e("div",{staticClass:"dropdown-divider",attrs:{role:"separator"}}),e("a",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(e){return t.orderByTime("desc")}}},[t._v("Newest Posts")]),e("a",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(e){return t.orderByTime("asc")}}},[t._v("Oldest Posts")])])])])])},F=[function(){var t=this,e=t._self._c;return e("button",{staticClass:"btn btn-lg btn-outline-secondary dropdown-toggle align-self-start",attrs:{id:"sort-btn",type:"button","data-toggle":"dropdown","aria-expanded":"false"}},[e("span",[t._v("Sort By")])])}],M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"post-container-main home-page"},["home"==this.$route.name?e("div",{staticClass:"post-header"},["home"==this.$route.name?e("div",{attrs:{id:"post-details-profile-picture-div"}},[e("img",{attrs:{id:"post-details-profile-picture",src:t.profile.profile_image,alt:"`${profile.username}'s image`"}})]):t._e(),"home"==this.$route.name?e("h3",{staticClass:"username-post"},[e("router-link",{staticClass:"username-for-post",attrs:{to:{name:"profile",params:{username:t.post.username}}}},[e("span",{staticClass:"username-for-post-text"},[t._v(t._s(t.post.username))])])],1):t._e(),e("div",{staticClass:"top-right-options"},[t.isFavorite||""==t.$store.state.token||"home"!=this.$route.name?t._e():e("i",{staticClass:"fa-regular fa-square-plus",on:{click:function(e){return t.addFavorite(t.post)}}}),t.isFavorite&&""!=t.$store.state.token&&"home"==this.$route.name||t.isFavorite&&"favorites"==this.$route.name?e("i",{staticClass:"fa-regular fa-square-minus",on:{click:function(e){return t.removeFavorite(t.post)}}}):t._e(),t.post.username==this.$store.state.user.username&&"home"==this.$route.name?e("b-dropdown",{attrs:{variant:"Outline Success","no-caret":"",text:"▼"}},[e("b-dropdown-item",{on:{click:function(e){return t.changeCaptionStatus()}}},[t._v("Edit Caption")]),e("b-dropdown-item",{on:{click:function(e){return t.removePhoto()}}},[t._v("Remove photo")])],1):t._e()],1)]):t._e(),e("img",{attrs:{id:"post-img",src:t.post.photo_url,alt:"`${post.username}'s image`","data-toggle":"modal","data-target":"#postDetails"+t.post.post_id}}),""!=t.$store.state.token?e("div",{ref:"postDetailsModal",staticClass:"modal fade",attrs:{id:"postDetails"+t.post.post_id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",staticStyle:{"max-width":"70%"}},[e("div",{staticClass:"modal-content",attrs:{id:"details-content"}},[e("div",{staticClass:"modal-body",attrs:{id:"details-body"}},[e("post-details",{attrs:{post:t.post}})],1)])])]):t._e(),e("div",{staticClass:"post-info"},["home"==this.$route.name?e("div",{staticClass:"reactions"},[e("div",{staticClass:"likes-ratings"},[e("div",{staticClass:"reactions-likes"},[t.liked||""==t.$store.state.token?t._e():e("i",{staticClass:"likeButton fa-regular fa-heart",attrs:{id:"likeIcon"},on:{click:function(e){return t.addLike(t.post.post_id)}}}),t.liked&&""!=t.$store.state.token?e("i",{staticClass:"likeButton fa-solid fa-heart",on:{click:function(e){return t.removeLike(t.post.post_id)}}}):t._e()]),e("div",{staticClass:"reactions-ratings"},[e("ratings",{attrs:{ratingsForPost:t.ratingsForPost,rateValue:t.rateValue,postId:t.post.post_id}})],1)]),e("p",{attrs:{id:"likes"}},[t._v(t._s(t.post.likes)+" likes")])]):t._e(),"home"!=this.$route.name||t.isEdit?"home"==this.$route.name&&t.isEdit&&t.post.username==this.$store.state.user.username?e("div",{attrs:{id:"caption2"}},[e("p",[e("span",{staticClass:"username-post>"},[t._v(t._s(t.post.username))]),t._v("   "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newCaption,expression:"newCaption"}],staticClass:"edit-caption",attrs:{type:"text",placeholder:t.post.caption},domProps:{value:t.newCaption},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.editCaption()},input:function(e){e.target.composing||(t.newCaption=e.target.value)}}})]),e("button",{attrs:{id:"cancel"},on:{click:function(e){return t.cancel()}}},[t._v("Cancel")])]):t._e():e("p",{attrs:{id:"caption"}},[e("span",{staticClass:"username-post"},[t._v(t._s(t.post.username))]),t._v(" "+t._s(t.caption)+" ")]),"home"==this.$route.name&&t.hasMoreThan1Comment?e("div",{staticClass:"comments"},t._l(t.shortenedCommentsList(),(function(s){return e("p",{key:s.id},[e("span",{attrs:{id:"commenter"}},[t._v(t._s(s.commenter))]),t._v(" "+t._s(s.comment)+" ")])})),0):t._e(),"home"!=this.$route.name||t.hasMoreThan1Comment?t._e():e("div",{staticClass:"comments"},t._l(t.commentsForEachPost,(function(s){return e("p",{key:s.id},[e("span",{attrs:{id:"commenter"}},[t._v(t._s(s.commenter))]),t._v(" "+t._s(s.comment)+" ")])})),0),e("div",{staticClass:"submit-new-comment"},[""!=t.$store.state.token&&"home"==this.$route.name?e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"comment-input",attrs:{type:"text",placeholder:"Write a comment..."},domProps:{value:t.filter},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createComment()},input:function(e){e.target.composing||(t.filter=e.target.value)}}}):t._e()])])])},L=[],U=function(){var t=this,e=t._self._c;return e("div",{staticClass:"post-details-main-view"},[e("post-details",{attrs:{post:t.post}})],1)},D=[],N=function(){var t=this,e=t._self._c;return e("div",{staticClass:"post-details-main d-flex"},[e("div",{staticClass:"modal-image-container"},[e("img",{attrs:{id:"post-details-img",src:t.post.photo_url}})]),e("div",{staticClass:"d-flex flex-column",attrs:{id:"picture-details"}},[e("div",{staticClass:"user-headline d-flex"},[e("div",{attrs:{id:"post-details-profile-picture-div"}},[e("img",{attrs:{id:"post-details-profile-picture",src:t.profile.profile_image,alt:"`${profile.username}'s image`"}})]),e("p",{staticClass:"align-self-end",attrs:{id:"post-details-caption"}},[e("span",{staticClass:"username-post"},[t._v(" "+t._s(t.post.username))]),t._v(" "+t._s(t.post.caption)+" ")])]),e("div",{staticClass:"comments",attrs:{id:"post-details-comments"}},[t._l(t.commentsForEachPost,(function(s){return e("p",{key:s.id},[e("span",{attrs:{id:"commenter"}},[t._v(t._s(s.commenter))]),t._v(" "+t._s(s.comment)+" ")])})),e("div",{staticClass:"submit-new-comment-pd"},[""==t.$store.state.token||"home"!=this.$route.name&&"profile"!=this.$route.name?t._e():e("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"comment-input",attrs:{type:"text",placeholder:"Write a comment..."},domProps:{value:t.filter},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createComment()},input:function(e){e.target.composing||(t.filter=e.target.value)}}})])],2)])])},V=[],B={data(){return{profile:{},filter:"",newComment:{post_id:this.post.post_id,commenter:this.$store.state.user.username,comment:""}}},props:["post"],computed:{commentsForEachPost(){return this.$store.state.allComments.filter(t=>t.post_id==this.post.post_id)}},methods:{createComment(){""!=this.filter&&(this.newComment.comment=this.filter,h.createNewComment(this.newComment).then(t=>{201==t.status&&(this.$store.commit("ADD_COMMENT",this.newComment),this.filter="",h.displayAllComments().then(t=>{this.$store.commit("SET_COMMENTS",t.data)}))}))}},created(){h.displayProfile(this.post.username).then(t=>{this.profile=t.data})}},j=B,q=(s("4580"),Object(g["a"])(j,N,V,!1,null,null,null)),H=q.exports,W={components:{PostDetails:H},props:["post"]},K=W,z=Object(g["a"])(K,U,D,!1,null,null,null),G=z.exports,J=function(){var t=this,e=t._self._c;return e("div",{staticClass:"ratings-container"},[e("p",[t._v("Avg Rating: "+t._s(t.avgRating))]),""!=t.$store.state.token?e("b-form-rating",{attrs:{variant:"warning"},on:{change:function(e){return t.addOrUpdate()}},model:{value:t.rate,callback:function(e){t.rate=e},expression:"rate"}}):t._e()],1)},Y=[],Q=s("db6c"),X={name:"Ratings",components:{BFormRating:Q["a"]},data(){return{rate:0,avgRating:null,ratingValue:this.rate}},props:["ratingsForPost","rateValue","postId"],methods:{addOrUpdate(){const t={post_id:this.postId,rating:this.rate,rater:this.$store.state.user.username};-1!=this.ratingValue&&this.rate>0?h.updateRating(t).then(t=>{200==t.status&&(h.getRatingByUser(this.postId,this.$store.state.user.username).then(t=>{this.ratingValue=t.data}),h.getAvgRating(this.postId).then(t=>{this.avgRating=t.data}))}):this.rate>0&&-1==this.rateValue&&h.addRating(t).then(t=>{200==t.status&&(h.getRatingByUser(this.postId,this.$store.state.user.username).then(t=>{this.ratingValue=t.data}),h.getAvgRating(this.postId).then(t=>{this.avgRating=t.data}))})}},created(){h.getRatingByUser(this.postId,this.$store.state.user.username).then(t=>{this.rate=t.data,this.ratingValue=t.data}),h.getAvgRating(this.postId).then(t=>{this.avgRating=t.data})}},Z=X,tt=(s("379f"),Object(g["a"])(Z,J,Y,!1,null,null,null)),et=tt.exports,st=s("9eaa"),at={name:"Post",props:["post","isPhotoFeed"],components:{PostDetails:G,Ratings:et,BDropdownItem:st["a"]},data(){return{profile:{},listOfComments:[],liked:!1,filter:"",newComment:{post_id:this.post.post_id,commenter:this.$store.state.user.username,comment:""},ratingsForPost:[],rateValue:null,isEdit:!1,newCaption:"",caption:this.post.caption}},methods:{addLike(t){h.like(t).then(t=>{200==t.status&&(this.liked=!0,this.$store.commit("ADD_LIKE",this.post))})},removeLike(t){h.unlike(t).then(t=>{200==t.status&&(this.liked=!1,this.$store.commit("REMOVE_LIKE",this.post))})},addFavorite(t){const e={username:this.$store.state.user.username,post_id:t.post_id};this.$store.commit("ADD_FAV_PHOTO",t.photo_url),h.addFavoritePost(e).then(s=>{200==s.status&&this.$store.commit("ADD_FAVORITE_POST",t,e)})},removeFavorite(t){h.deleteFavorite(t.post_id).then(e=>{200==e.status&&(this.$store.commit("REMOVE_FAV_PHOTO",t.photo_url),this.$store.commit("REMOVE_FAVORITE_POST",t))})},createComment(){""!=this.filter&&(this.newComment.comment=this.filter,h.createNewComment(this.newComment).then(t=>{201==t.status&&(this.$store.commit("ADD_COMMENT",this.newComment),this.filter="",h.displayAllComments().then(t=>{this.$store.commit("SET_COMMENTS",t.data)}))}))},shortenedCommentsList(){const t=this.$store.state.allComments.filter(t=>t.post_id==this.post.post_id);return t.slice(this.listOfComments.length-2)},changeCaptionStatus(){this.isEdit=!0},editCaption(){if(""!=this.newCaption){const t={post_id:this.post.post_id,username:this.post.username,photo_url:this.post.photo_url,likes:this.post.likes,caption:this.newCaption,date_time:this.post.date_time};h.editCaption(t).then(t=>{200==t.status&&(this.caption=this.newCaption,this.newCaption="",this.isEdit=!1)})}},removePhoto(){confirm("Do you want to remove photo?")&&h.removePost(this.post.post_id).then(t=>{200==t.status&&(0!=this.$store.state.userPhotos.length&&this.$store.commit("REMOVE_PHOTO",this.photoUrl),h.displayPosts().then(t=>{this.$store.commit("SET_ALL_POSTS",t.data)}))})},cancel(){this.isEdit=!1,this.newCaption=""}},computed:{isFavorite(){return this.$store.state.favoriteIds.includes(this.post.post_id)},hasMoreThan1Comment(){return this.commentsForEachPost.length>1},commentsForEachPost(){return this.$store.state.allComments.filter(t=>t.post_id==this.post.post_id)},photoUrl(){return this.post.photo_url}},created(){h.getRatingsById(this.post.post_id).then(t=>{this.ratingsForPost=t.data}),h.getRatingByUser(this.post.post_id,this.$store.state.user.username).then(t=>{this.rateValue=t.data}),h.displayProfile(this.post.username).then(t=>{200==t.status&&(this.profile=t.data)})}},rt=at,ot=(s("9e6c"),Object(g["a"])(rt,M,L,!1,null,null,null)),it=ot.exports,nt={name:"home",components:{post:it},data(){return{listOfPosts:[],userCurrent:this.$store.state.user.username}},created(){h.displayPosts().then(t=>{this.listOfPosts=t.data,this.$store.commit("SET_ALL_POSTS",t.data)}),h.displayFavoritePosts(this.$store.state.user.username).then(t=>{this.$store.commit("SET_FAVORITES",t.data)}),h.displayFavoritePhotos(this.$store.state.user.username).then(t=>{200==t.status&&this.$store.commit("SET_FAV_PHOTOS",t.data)}),h.displayFavoriteIds(this.$store.state.user.username).then(t=>{this.$store.commit("SET_FAV_IDS",t.data)})},methods:{orderByRating(t){h.displayPostsByRating(t).then(t=>{200==t.status&&(this.listOfPosts=t.data,this.$store.commit("SET_ALL_POSTS",t.data))})},orderByTime(t){h.displayPostsByTime(t).then(t=>{200==t.status&&(this.listOfPosts=t.data,this.$store.commit("SET_ALL_POSTS",t.data))})}}},lt=nt,ut=(s("c6b65"),Object(g["a"])(lt,I,F,!1,null,null,null)),dt=ut.exports,mt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-login"},[t._m(0),e("div",{staticClass:"text-center",attrs:{id:"login"}},[e("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[e("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Please Sign In")]),t.invalidCredentials?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" Invalid username and password! ")]):t._e(),this.$route.query.registration?e("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(" Thank you for registering, please sign in. ")]):t._e(),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),e("router-link",{staticClass:"need-account",attrs:{to:{name:"register"}}},[t._v("Need an account?")]),e("button",{staticClass:"sign-in btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v(" Sign in ")])],1)])])},pt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"image"},[e("img",{attrs:{id:"image-login",src:"https://res.cloudinary.com/dkq5ktysl/image/upload/v1675876172/momentoApp_upqxds.jpg",alt:"camera hanging from strap"}})])}],ct={login(t){return c.a.post("/login",t)},register(t){return c.a.post("/register",t)},updatePassword(t){return c.a.put("/update-password",t)}},ht={name:"login",components:{},data(){return{user:{username:"",password:""},invalidCredentials:!1}},methods:{login(){ct.login(this.user).then(t=>{200==t.status&&(this.$store.commit("SET_AUTH_TOKEN",t.data.token),this.$store.commit("SET_USER",t.data.user),this.$router.push("/"))}).catch(t=>{const e=t.response;401===e.status&&(this.invalidCredentials=!0)})}}},ft=ht,vt=(s("d7d7"),Object(g["a"])(ft,mt,pt,!1,null,null,null)),gt=vt.exports,_t=function(){var t=this,e=t._self._c;return e("h1",[t._v("Logout")])},Ct=[],Pt={created(){this.$store.commit("LOGOUT"),this.$router.push("/login")}},wt=Pt,yt=Object(g["a"])(wt,_t,Ct,!1,null,null,null),bt=yt.exports,$t=function(){var t=this,e=t._self._c;return e("div",{staticClass:"text-center",attrs:{id:"register"}},[t._m(0),e("div",{staticClass:"register-container"},[e("form",{staticClass:"form-register",on:{submit:function(e){return e.preventDefault(),t.register.apply(null,arguments)}}},[e("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Create Account")]),t.registrationErrors?e("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(" "+t._s(t.registrationErrorMsg)+" ")]):t._e(),e("label",{staticClass:"sr-only",attrs:{for:"username"}},[t._v("Username")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),e("label",{staticClass:"sr-only",attrs:{for:"password"}},[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.confirmPassword,expression:"user.confirmPassword"}],staticClass:"form-control",attrs:{type:"password",id:"confirmPassword",placeholder:"Confirm Password",required:""},domProps:{value:t.user.confirmPassword},on:{input:function(e){e.target.composing||t.$set(t.user,"confirmPassword",e.target.value)}}}),e("router-link",{staticClass:"have-account",attrs:{to:{name:"login"}}},[t._v("Have an account?")]),e("button",{staticClass:"sign-in btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v(" Create Account ")])],1)])])},kt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"image"},[e("img",{attrs:{id:"image-register",src:"https://res.cloudinary.com/dkq5ktysl/image/upload/v1675876172/momentoApp_upqxds.jpg",alt:"camera hanging from strap"}})])}],Ot={name:"register",data(){return{user:{username:"",password:"",confirmPassword:"",role:"user"},registrationErrors:!1,registrationErrorMsg:"There were problems registering this user."}},methods:{register(){this.user.password!=this.user.confirmPassword?(this.registrationErrors=!0,this.registrationErrorMsg="Password & Confirm Password do not match."):ct.register(this.user).then(t=>{201==t.status&&this.$router.push({path:"/login",query:{registration:"success"}})}).catch(t=>{const e=t.response;this.registrationErrors=!0,400===e.status&&(this.registrationErrorMsg="Bad Request: Validation Errors")})},clearErrors(){this.registrationErrors=!1,this.registrationErrorMsg="There were problems registering this user."}}},Et=Ot,St=(s("ee9b"),Object(g["a"])(Et,$t,kt,!1,null,null,null)),Tt=St.exports,xt=s("2f62");a["default"].use(xt["a"]);const At=localStorage.getItem("token"),Rt=JSON.parse(localStorage.getItem("user"));null!=At&&(c.a.defaults.headers.common["Authorization"]="Bearer "+At);var It=new xt["a"].Store({state:{token:At||"",user:Rt||{},likes:Number,allPosts:[],favoritePosts:[],favoriteIds:[],profileImageUrl:"",allComments:[],ratings:[],currentPost:{},profile:{},userPhotos:[],favoritePhotos:[]},mutations:{ADD_FAV_PHOTO(t,e){t.favoritePhotos.push(e)},REMOVE_FAV_PHOTO(t,e){t.favoritePhotos=t.favoritePhotos.filter(t=>t!=e)},SET_FAV_PHOTOS(t,e){t.favoritePhotos=e},SET_USER_PHOTOS(t,e){t.userPhotos=e},ADD_PHOTO(t,e){t.userPhotos.push(e)},REMOVE_PHOTO(t,e){t.userPhotos=t.userPhotos.filter(t=>t!=e)},SET_COMMENTS(t,e){t.allComments=e},ADD_COMMENT(t,e){t.allComments.push(e)},SET_AUTH_TOKEN(t,e){t.token=e,localStorage.setItem("token",e),c.a.defaults.headers.common["Authorization"]="Bearer "+e},SET_USER(t,e){t.user=e,localStorage.setItem("user",JSON.stringify(e))},LOGOUT(t){localStorage.removeItem("token"),localStorage.removeItem("user"),t.token="",t.user={},c.a.defaults.headers.common={}},ADD_LIKE(t,e){h.displayPost(e.post_id).then(t=>{200==t.status&&(e.likes=t.data.likes)})},REMOVE_LIKE(t,e){h.displayPost(e.post_id).then(t=>{200==t.status&&(e.likes=t.data.likes)})},SET_FAVORITES(t,e){t.favoritePosts=e},SET_ALL_POSTS(t,e){t.allPosts=e},SET_FAV_IDS(t,e){t.favoriteIds=e},ADD_FAVORITE_POST(t,e){t.favoritePosts.unshift(e),t.favoriteIds.unshift(e.post_id)},REMOVE_FAVORITE_POST(t,e){const s=t.favoritePosts.filter(t=>t.post_id!=e.post_id);t.favoritePosts=s;const a=t.favoriteIds.indexOf(e.post_id);a>-1&&t.favoriteIds.splice(a,1)},SET_PROFILE_IMAGE_URL(t,e){t.profileImageUrl=e},SET_PROFILE(t,e){t.profile=e}}}),Ft=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("profile",{attrs:{profile:t.profile,listOfPosts:t.listOfPosts,listOfPhotos:t.listOfPhotos}})],1)},Mt=[],Lt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-profile"},[e("div",{staticClass:"bio-header"},[e("div",{staticClass:"profile-picture-div",attrs:{id:"profile-pic-div"}},[e("img",{staticClass:"profile-picture",attrs:{id:"profile-pic",src:t.profile.profile_image}})]),e("div",{staticClass:"name-and-bio"},[e("div",{staticClass:"username-and-edit"},[e("h2",{staticClass:"profile-username"},[t._v(t._s(this.$route.params.username))]),this.$store.state.user.username==this.$route.params.username?e("router-link",{attrs:{to:{name:"edit-profile",params:{username:this.$route.params.username}}}},[e("button",{staticClass:"btn",attrs:{type:"button",id:"editBtn"}},[t._v(" Edit Profile ")])]):t._e()],1),e("h4",{attrs:{id:"profile-name"}},[t._v(t._s(t.profile.name))]),e("p",{attrs:{id:"bio"}},[t._v(t._s(t.profile.profile_bio))])])]),e("div",{staticClass:"profile-photos-container"},t._l(t.listOfPhotos,(function(s){return e("div",{key:s.id,staticClass:"profile-photos-divs"},[e("img",{staticClass:"profile-posts",attrs:{"data-toggle":"modal","data-target":"#postDetails"+t.getPost(s).post_id,src:s}}),""!=t.$store.state.token?e("div",{ref:"postDetailsModal",refInFor:!0,staticClass:"modal fade",attrs:{id:"postDetails"+t.getPost(s).post_id,tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered",staticStyle:{"max-width":"70%"}},[e("div",{staticClass:"modal-content",attrs:{id:"details-content"}},[e("div",{staticClass:"modal-body",attrs:{id:"details-body"}},[e("post-details",{attrs:{post:t.getPost(s)}})],1)])])]):t._e()])})),0)])},Ut=[],Dt={props:["profile","listOfPosts","listOfPhotos"],data(){return{}},components:{PostDetails:G},methods:{getPost(t){return this.listOfPosts.filter(e=>e.photo_url==t)[0]}}},Nt=Dt,Vt=(s("9f03"),Object(g["a"])(Nt,Lt,Ut,!1,null,null,null)),Bt=Vt.exports,jt={components:{Profile:Bt},data(){return{}},computed:{profile(){return this.$store.state.profile},listOfPosts(){return this.$store.state.allPosts.filter(t=>t.username==this.$route.params.username)},listOfPhotos(){return this.$store.state.userPhotos}},created(){h.displayProfile(this.$route.params.username).then(t=>{200==t.status&&this.$store.commit("SET_PROFILE",t.data)}),h.displayPostsByUsername(this.$route.params.username).then(t=>{this.$store.commit("SET_ALL_POSTS",t.data)}),h.displayPhotosByUser(this.$route.params.username).then(t=>{200==t.status&&this.$store.commit("SET_USER_PHOTOS",t.data)})}},qt=jt,Ht=Object(g["a"])(qt,Ft,Mt,!1,null,null,null),Wt=Ht.exports,Kt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main"},[e("edit")],1)},zt=[],Gt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"edit-main"},[e("div",{staticClass:"edit-form d-flex flex-column"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"name-input"}},[t._v("Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newProfile.name,expression:"newProfile.name"}],staticClass:"form-control",attrs:{type:"text",id:"name-input",placeholder:"Enter new display name"},domProps:{value:t.newProfile.name},on:{input:function(e){e.target.composing||t.$set(t.newProfile,"name",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"bio-input"}},[t._v("Biography")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newProfile.profile_bio,expression:"newProfile.profile_bio"}],staticClass:"form-control",attrs:{id:"bio-input",rows:"3"},domProps:{value:t.newProfile.profile_bio},on:{input:function(e){e.target.composing||t.$set(t.newProfile,"profile_bio",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"email-input"}},[t._v("Email Address")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newProfile.email,expression:"newProfile.email"}],staticClass:"form-control",attrs:{type:"email",id:"email-input",placeholder:"Enter new email"},domProps:{value:t.newProfile.email},on:{input:function(e){e.target.composing||t.$set(t.newProfile,"email",e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"sr-only",attrs:{for:"password"}},[t._v("New Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:"New Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.confirmPassword,expression:"user.confirmPassword"}],staticClass:"form-control",attrs:{type:"password",id:"confirmPassword",placeholder:"Confirm Password",required:""},domProps:{value:t.user.confirmPassword},on:{input:function(e){e.target.composing||t.$set(t.user,"confirmPassword",e.target.value)}}})]),e("cloudinary-comp"),e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:t.updateProfile}},[t._v(" Submit ")])],1)])},Jt=[],Yt={data(){return{newProfile:{},user:{username:this.$route.params.username,password:"",confirmPassword:""}}},computed:{passwordMatch(){return this.user.password===this.user.confirmPassword}},components:{CloudinaryComp:C},created(){h.displayProfile(this.$route.params.username).then(t=>{this.newProfile=t.data})},methods:{updateProfile(){""!=this.$store.state.profileImageUrl&&(this.newProfile.profile_image=this.$store.state.profileImageUrl),this.passwordMatch?ct.updatePassword(this.user).then(t=>{200!=t.status&&alert("Issue updating password. Please try again")}):alert("Password & Confirm Password do not match."),h.updateProfile(this.newProfile).then(t=>{200==t.status&&this.passwordMatch&&this.$router.push("/profile/"+this.$route.params.username)})}}},Qt=Yt,Xt=(s("8c80"),Object(g["a"])(Qt,Gt,Jt,!1,null,null,null)),Zt=Xt.exports,te={data(){return{}},components:{Edit:Zt},created(){}},ee=te,se=Object(g["a"])(ee,Kt,zt,!1,null,null,null),ae=se.exports,re=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-favorites"},[e("h3",{staticClass:"favorite-title"},[t._v("Favorites")]),e("div",{staticClass:"favorite-posts-container"},t._l(this.$store.state.favoritePhotos,(function(t){return e("div",{key:t.post_id,staticClass:"favorite-post"},[e("img",{attrs:{id:"favorite-image",src:t}})])})),0)])},oe=[],ie={name:"favorite",components:{},data(){return{listOfIds:[]}},created(){}},ne=ie,le=(s("0a00"),Object(g["a"])(ne,re,oe,!1,null,null,null)),ue=le.exports;a["default"].use(R["a"]);const de=new R["a"]({mode:"history",base:"",routes:[{path:"/",name:"home",component:dt,meta:{requiresAuth:!1}},{path:"/login",name:"login",component:gt,meta:{requiresAuth:!1}},{path:"/logout",name:"logout",component:bt,meta:{requiresAuth:!1}},{path:"/register",name:"register",component:Tt,meta:{requiresAuth:!1}},{path:"/profile/:username",name:"profile",component:Wt,meta:{requiresAuth:!0}},{path:"/profile/:username/edit",name:"edit-profile",component:ae,meta:{requiresAuth:!0}},{path:"/favorites",name:"favorites",component:ue,meta:{requiresAuth:!0}}]});de.beforeEach((t,e,s)=>{const a=t.matched.some(t=>t.meta.requiresAuth);a&&""===It.state.token?s("/login"):s()});var me=de,pe=s("5f5b"),ce=s("b1e0");s("f9e3"),s("2dd8");s("5b34"),a["default"].config.productionTip=!1,c.a.defaults.baseURL="https://tegram-app.fly.dev",a["default"].use(pe["a"]),a["default"].use(ce["a"]),new a["default"]({router:me,store:It,render:t=>t(A)}).$mount("#app")},"5b34":function(t,e,s){},"5d57":function(t,e,s){},"8c80":function(t,e,s){"use strict";s("9afd")},"9afd":function(t,e,s){},"9e6c":function(t,e,s){"use strict";s("a1e5")},"9f03":function(t,e,s){"use strict";s("e29a")},a1e5:function(t,e,s){},c6b65:function(t,e,s){"use strict";s("50c6")},cfeb:function(t,e,s){},d3b9:function(t,e,s){},d7d7:function(t,e,s){"use strict";s("d3b9")},de0a:function(t,e,s){},e29a:function(t,e,s){},ee9b:function(t,e,s){"use strict";s("cfeb")},eff1:function(t,e,s){},f959:function(t,e,s){"use strict";s("125f")}});
//# sourceMappingURL=app.2f4ca82e.js.map